{% extends "base.html" %}

{% block js %}<script defer src="{{ url_for('static', filename='home.js') }}"></script>{% endblock %}

{% block title %}ILearn &mdash; Home{% endblock %}

{% block hero %}
<section class="hero-section">
    <div id="particles-js"></div>
    <div class="hero-content">
        <h1 class="hero-title"><span class="text-gradient">Scopri, Ascolta, Impara</span></h1>
        <p class="hero-subtitle">Esplora i migliori podcast educativi. Dalla scienza alla cucina, trova il contenuto perfetto per te.</p>
    </div>
</section>
{% endblock %}

{% block content %}
<!-- Pill Filters -->
<div class="pill-filter-container" data-aos="fade-up">
    <a href="#" class="pill-filter cat-pill active" data-cat="tutte">
        <i class="bi bi-grid-3x3-gap"></i> Tutte
    </a>
    {% for categoria in categorie %}
    <a href="{{ url_for('categoria', nome_categoria=categoria.lower()) }}"
       class="pill-filter cat-pill cat-pill-{{ categoria.lower() }}"
       data-cat="{{ categoria.lower() }}">
        {% if categoria.lower() == 'cucina' %}<i class="bi bi-fire"></i>
        {% elif categoria.lower() == 'scienza' %}<i class="bi bi-rocket-takeoff-fill"></i>
        {% elif categoria.lower() == 'sport' %}<i class="bi bi-trophy-fill"></i>
        {% elif categoria.lower() == 'tecnologia' %}<i class="bi bi-motherboard-fill"></i>
        {% elif categoria.lower() == 'altro' %}<i class="bi bi-stars"></i>
        {% endif %} {{ categoria }}
    </a>
    {% endfor %}
</div>

<!-- Podcast Grid -->
{% if podcasts %}
<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4 card-grid pb-5">
    {% for podcast in podcasts %}
    <div class="col" data-aos="fade-up" data-aos-delay="{{ loop.index0 * 100 }}">
        <article class="glass-card" data-categoria="{{ podcast.Categoria }}">
            <div class="card-img-wrapper">
                <a href="{{ url_for('podcast', podcast_id=podcast.podcast_id) }}">
                    <img class="card-img-top"
                         src="{{ url_for('static', filename='podcast' + podcast.podcast_id|string + podcast.Estensione) }}"
                         alt="Immagine del podcast {{ podcast.Titolo }}">
                </a>
            </div>
            <div class="card-body">
                <span class="badge-category mb-2">{{ podcast.categoria }}</span>
                <h5 class="card-title">
                    <a href="{{ url_for('podcast', podcast_id=podcast.podcast_id) }}">{{ podcast.Titolo }}</a>
                </h5>
                <p class="card-author"><i class="bi bi-person"></i> {{ podcast.username }}</p>
                <p class="card-text">{{ podcast.Descrizione[:100] }}{% if podcast.Descrizione|length > 100 %}...{% endif %}</p>
            </div>
        </article>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="text-center py-5" data-aos="fade-up">
    <i class="bi bi-broadcast" style="font-size: 3rem; color: var(--text-muted);"></i>
    <h4 class="mt-3" style="color: var(--text-secondary);">Non sono presenti podcast.</h4>
</div>
{% endif %}
{% endblock %}
